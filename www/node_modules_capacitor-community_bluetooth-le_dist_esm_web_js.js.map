{"version":3,"file":"node_modules_capacitor-community_bluetooth-le_dist_esm_web_js.js","mappings":"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","sources":["./node_modules/@capacitor-community/bluetooth-le/dist/esm/timeout.js","./node_modules/@capacitor-community/bluetooth-le/dist/esm/web.js"],"sourcesContent":["export async function runWithTimeout(promise, time, exception) {\n    let timer;\n    return Promise.race([\n        promise,\n        new Promise((_, reject) => {\n            timer = setTimeout(() => reject(exception), time);\n        }),\n    ]).finally(() => clearTimeout(timer));\n}\n","import { WebPlugin } from '@capacitor/core';\nimport { hexStringToDataView, mapToObject, webUUIDToString } from './conversion';\nimport { runWithTimeout } from './timeout';\nexport class BluetoothLeWeb extends WebPlugin {\n    constructor() {\n        super(...arguments);\n        this.deviceMap = new Map();\n        this.discoveredDevices = new Map();\n        this.scan = null;\n        this.DEFAULT_CONNECTION_TIMEOUT = 10000;\n    }\n    async initialize() {\n        if (typeof navigator === 'undefined' || !navigator.bluetooth) {\n            throw this.unavailable('Web Bluetooth API not available in this browser.');\n        }\n        const isAvailable = await navigator.bluetooth.getAvailability();\n        if (!isAvailable) {\n            throw this.unavailable('No Bluetooth radio available.');\n        }\n    }\n    async isEnabled() {\n        // not available on web\n        return { value: true };\n    }\n    async enable() {\n        throw this.unavailable('enable is not available on web.');\n    }\n    async disable() {\n        throw this.unavailable('disable is not available on web.');\n    }\n    async startEnabledNotifications() {\n        // not available on web\n    }\n    async stopEnabledNotifications() {\n        // not available on web\n    }\n    async isLocationEnabled() {\n        throw this.unavailable('isLocationEnabled is not available on web.');\n    }\n    async openLocationSettings() {\n        throw this.unavailable('openLocationSettings is not available on web.');\n    }\n    async openBluetoothSettings() {\n        throw this.unavailable('openBluetoothSettings is not available on web.');\n    }\n    async openAppSettings() {\n        throw this.unavailable('openAppSettings is not available on web.');\n    }\n    async setDisplayStrings() {\n        // not available on web\n    }\n    async requestDevice(options) {\n        const filters = this.getFilters(options);\n        const device = await navigator.bluetooth.requestDevice({\n            filters: filters.length ? filters : undefined,\n            optionalServices: options === null || options === void 0 ? void 0 : options.optionalServices,\n            acceptAllDevices: filters.length === 0,\n        });\n        this.deviceMap.set(device.id, device);\n        const bleDevice = this.getBleDevice(device);\n        return bleDevice;\n    }\n    async requestLEScan(options) {\n        this.requestBleDeviceOptions = options;\n        const filters = this.getFilters(options);\n        await this.stopLEScan();\n        this.discoveredDevices = new Map();\n        navigator.bluetooth.removeEventListener('advertisementreceived', this.onAdvertisementReceived);\n        navigator.bluetooth.addEventListener('advertisementreceived', this.onAdvertisementReceived);\n        this.scan = await navigator.bluetooth.requestLEScan({\n            filters: filters.length ? filters : undefined,\n            acceptAllAdvertisements: filters.length === 0,\n            keepRepeatedDevices: options === null || options === void 0 ? void 0 : options.allowDuplicates,\n        });\n    }\n    onAdvertisementReceived(event) {\n        var _a, _b;\n        // do not use `this` in event listener\n        const deviceId = event.device.id;\n        BluetoothLe.deviceMap.set(deviceId, event.device);\n        const isNew = !BluetoothLe.discoveredDevices.has(deviceId);\n        if (isNew || ((_a = BluetoothLe.requestBleDeviceOptions) === null || _a === void 0 ? void 0 : _a.allowDuplicates)) {\n            BluetoothLe.discoveredDevices.set(deviceId, true);\n            const device = BluetoothLe.getBleDevice(event.device);\n            const result = {\n                device,\n                localName: device.name,\n                rssi: event.rssi,\n                txPower: event.txPower,\n                manufacturerData: mapToObject(event.manufacturerData),\n                serviceData: mapToObject(event.serviceData),\n                uuids: (_b = event.uuids) === null || _b === void 0 ? void 0 : _b.map(webUUIDToString),\n            };\n            BluetoothLe.notifyListeners('onScanResult', result);\n        }\n    }\n    async stopLEScan() {\n        var _a;\n        if ((_a = this.scan) === null || _a === void 0 ? void 0 : _a.active) {\n            this.scan.stop();\n        }\n        this.scan = null;\n    }\n    async getDevices(_options) {\n        const devices = await navigator.bluetooth.getDevices();\n        const bleDevices = devices.map((device) => {\n            this.deviceMap.set(device.id, device);\n            const bleDevice = this.getBleDevice(device);\n            return bleDevice;\n        });\n        return { devices: bleDevices };\n    }\n    async getConnectedDevices(_options) {\n        const devices = await navigator.bluetooth.getDevices();\n        const bleDevices = devices\n            .filter((device) => {\n            var _a;\n            return (_a = device.gatt) === null || _a === void 0 ? void 0 : _a.connected;\n        })\n            .map((device) => {\n            this.deviceMap.set(device.id, device);\n            const bleDevice = this.getBleDevice(device);\n            return bleDevice;\n        });\n        return { devices: bleDevices };\n    }\n    async connect(options) {\n        var _a, _b;\n        const device = this.getDeviceFromMap(options.deviceId);\n        device.removeEventListener('gattserverdisconnected', this.onDisconnected);\n        device.addEventListener('gattserverdisconnected', this.onDisconnected);\n        const timeoutError = Symbol();\n        if (device.gatt === undefined) {\n            throw new Error('No gatt server available.');\n        }\n        try {\n            const timeout = (_a = options.timeout) !== null && _a !== void 0 ? _a : this.DEFAULT_CONNECTION_TIMEOUT;\n            await runWithTimeout(device.gatt.connect(), timeout, timeoutError);\n        }\n        catch (error) {\n            // cancel pending connect call, does not work yet in chromium because of a bug:\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=684073\n            await ((_b = device.gatt) === null || _b === void 0 ? void 0 : _b.disconnect());\n            if (error === timeoutError) {\n                throw new Error('Connection timeout');\n            }\n            else {\n                throw error;\n            }\n        }\n    }\n    onDisconnected(event) {\n        // do not use `this` in event listener\n        const deviceId = event.target.id;\n        const key = `disconnected|${deviceId}`;\n        BluetoothLe.notifyListeners(key, null);\n    }\n    async createBond(_options) {\n        throw this.unavailable('createBond is not available on web.');\n    }\n    async isBonded(_options) {\n        throw this.unavailable('isBonded is not available on web.');\n    }\n    async disconnect(options) {\n        var _a;\n        (_a = this.getDeviceFromMap(options.deviceId).gatt) === null || _a === void 0 ? void 0 : _a.disconnect();\n    }\n    async getServices(options) {\n        var _a, _b;\n        const services = (_b = (await ((_a = this.getDeviceFromMap(options.deviceId).gatt) === null || _a === void 0 ? void 0 : _a.getPrimaryServices()))) !== null && _b !== void 0 ? _b : [];\n        const bleServices = [];\n        for (const service of services) {\n            const characteristics = await service.getCharacteristics();\n            const bleCharacteristics = [];\n            for (const characteristic of characteristics) {\n                bleCharacteristics.push({\n                    uuid: characteristic.uuid,\n                    properties: this.getProperties(characteristic),\n                    descriptors: await this.getDescriptors(characteristic),\n                });\n            }\n            bleServices.push({ uuid: service.uuid, characteristics: bleCharacteristics });\n        }\n        return { services: bleServices };\n    }\n    async getDescriptors(characteristic) {\n        try {\n            const descriptors = await characteristic.getDescriptors();\n            return descriptors.map((descriptor) => ({\n                uuid: descriptor.uuid,\n            }));\n        }\n        catch (_a) {\n            return [];\n        }\n    }\n    getProperties(characteristic) {\n        return {\n            broadcast: characteristic.properties.broadcast,\n            read: characteristic.properties.read,\n            writeWithoutResponse: characteristic.properties.writeWithoutResponse,\n            write: characteristic.properties.write,\n            notify: characteristic.properties.notify,\n            indicate: characteristic.properties.indicate,\n            authenticatedSignedWrites: characteristic.properties.authenticatedSignedWrites,\n            reliableWrite: characteristic.properties.reliableWrite,\n            writableAuxiliaries: characteristic.properties.writableAuxiliaries,\n        };\n    }\n    async getCharacteristic(options) {\n        var _a;\n        const service = await ((_a = this.getDeviceFromMap(options.deviceId).gatt) === null || _a === void 0 ? void 0 : _a.getPrimaryService(options === null || options === void 0 ? void 0 : options.service));\n        return service === null || service === void 0 ? void 0 : service.getCharacteristic(options === null || options === void 0 ? void 0 : options.characteristic);\n    }\n    async getDescriptor(options) {\n        const characteristic = await this.getCharacteristic(options);\n        return characteristic === null || characteristic === void 0 ? void 0 : characteristic.getDescriptor(options === null || options === void 0 ? void 0 : options.descriptor);\n    }\n    async readRssi(_options) {\n        throw this.unavailable('readRssi is not available on web.');\n    }\n    async read(options) {\n        const characteristic = await this.getCharacteristic(options);\n        const value = await (characteristic === null || characteristic === void 0 ? void 0 : characteristic.readValue());\n        return { value };\n    }\n    async write(options) {\n        const characteristic = await this.getCharacteristic(options);\n        let dataView;\n        if (typeof options.value === 'string') {\n            dataView = hexStringToDataView(options.value);\n        }\n        else {\n            dataView = options.value;\n        }\n        await (characteristic === null || characteristic === void 0 ? void 0 : characteristic.writeValueWithResponse(dataView));\n    }\n    async writeWithoutResponse(options) {\n        const characteristic = await this.getCharacteristic(options);\n        let dataView;\n        if (typeof options.value === 'string') {\n            dataView = hexStringToDataView(options.value);\n        }\n        else {\n            dataView = options.value;\n        }\n        await (characteristic === null || characteristic === void 0 ? void 0 : characteristic.writeValueWithoutResponse(dataView));\n    }\n    async readDescriptor(options) {\n        const descriptor = await this.getDescriptor(options);\n        const value = await (descriptor === null || descriptor === void 0 ? void 0 : descriptor.readValue());\n        return { value };\n    }\n    async writeDescriptor(options) {\n        const descriptor = await this.getDescriptor(options);\n        let dataView;\n        if (typeof options.value === 'string') {\n            dataView = hexStringToDataView(options.value);\n        }\n        else {\n            dataView = options.value;\n        }\n        await (descriptor === null || descriptor === void 0 ? void 0 : descriptor.writeValue(dataView));\n    }\n    async startNotifications(options) {\n        const characteristic = await this.getCharacteristic(options);\n        characteristic === null || characteristic === void 0 ? void 0 : characteristic.removeEventListener('characteristicvaluechanged', this.onCharacteristicValueChanged);\n        characteristic === null || characteristic === void 0 ? void 0 : characteristic.addEventListener('characteristicvaluechanged', this.onCharacteristicValueChanged);\n        await (characteristic === null || characteristic === void 0 ? void 0 : characteristic.startNotifications());\n    }\n    onCharacteristicValueChanged(event) {\n        var _a, _b;\n        // do not use `this` in event listener\n        const characteristic = event.target;\n        const key = `notification|${(_a = characteristic.service) === null || _a === void 0 ? void 0 : _a.device.id}|${(_b = characteristic.service) === null || _b === void 0 ? void 0 : _b.uuid}|${characteristic.uuid}`;\n        BluetoothLe.notifyListeners(key, {\n            value: characteristic.value,\n        });\n    }\n    async stopNotifications(options) {\n        const characteristic = await this.getCharacteristic(options);\n        await (characteristic === null || characteristic === void 0 ? void 0 : characteristic.stopNotifications());\n    }\n    getFilters(options) {\n        var _a;\n        const filters = [];\n        for (const service of (_a = options === null || options === void 0 ? void 0 : options.services) !== null && _a !== void 0 ? _a : []) {\n            filters.push({\n                services: [service],\n                name: options === null || options === void 0 ? void 0 : options.name,\n                namePrefix: options === null || options === void 0 ? void 0 : options.namePrefix,\n            });\n        }\n        if (((options === null || options === void 0 ? void 0 : options.name) || (options === null || options === void 0 ? void 0 : options.namePrefix)) && filters.length === 0) {\n            filters.push({\n                name: options.name,\n                namePrefix: options.namePrefix,\n            });\n        }\n        return filters;\n    }\n    getDeviceFromMap(deviceId) {\n        const device = this.deviceMap.get(deviceId);\n        if (device === undefined) {\n            throw new Error('Device not found. Call \"requestDevice\", \"requestLEScan\" or \"getDevices\" first.');\n        }\n        return device;\n    }\n    getBleDevice(device) {\n        var _a;\n        const bleDevice = {\n            deviceId: device.id,\n            // use undefined instead of null if name is not available\n            name: (_a = device.name) !== null && _a !== void 0 ? _a : undefined,\n            uuids: device.uuids,\n        };\n        return bleDevice;\n    }\n}\nexport const BluetoothLe = new BluetoothLeWeb();\n"],"names":["runWithTimeout","promise","time","exception","timer","Promise","race","_","reject","setTimeout","finally","clearTimeout","WebPlugin","hexStringToDataView","mapToObject","webUUIDToString","BluetoothLeWeb","constructor","arguments","deviceMap","Map","discoveredDevices","scan","DEFAULT_CONNECTION_TIMEOUT","initialize","navigator","bluetooth","unavailable","isAvailable","getAvailability","isEnabled","value","enable","disable","startEnabledNotifications","stopEnabledNotifications","isLocationEnabled","openLocationSettings","openBluetoothSettings","openAppSettings","setDisplayStrings","requestDevice","options","filters","getFilters","device","length","undefined","optionalServices","acceptAllDevices","set","id","bleDevice","getBleDevice","requestLEScan","requestBleDeviceOptions","stopLEScan","removeEventListener","onAdvertisementReceived","addEventListener","acceptAllAdvertisements","keepRepeatedDevices","allowDuplicates","event","_a","_b","deviceId","BluetoothLe","isNew","has","result","localName","name","rssi","txPower","manufacturerData","serviceData","uuids","map","notifyListeners","active","stop","getDevices","_options","devices","bleDevices","getConnectedDevices","filter","gatt","connected","connect","getDeviceFromMap","onDisconnected","timeoutError","Symbol","Error","timeout","error","disconnect","target","key","createBond","isBonded","getServices","services","getPrimaryServices","bleServices","service","characteristics","getCharacteristics","bleCharacteristics","characteristic","push","uuid","properties","getProperties","descriptors","getDescriptors","descriptor","broadcast","read","writeWithoutResponse","write","notify","indicate","authenticatedSignedWrites","reliableWrite","writableAuxiliaries","getCharacteristic","getPrimaryService","getDescriptor","readRssi","readValue","dataView","writeValueWithResponse","writeValueWithoutResponse","readDescriptor","writeDescriptor","writeValue","startNotifications","onCharacteristicValueChanged","stopNotifications","namePrefix","get"],"sourceRoot":"webpack:///"}